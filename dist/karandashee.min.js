!function(t){var e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(s,r,function(e){return t[e]}.bind(null,r));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e){t.exports=d3},function(t,e,i){"use strict";i.r(e),function(t){var e=i(0);!function(){class i{constructor(t){this.updateRate=t.updateRate||2e3,this.numberOfBars=t.numberOfBars||96,this.minBarHeight=t.minBarHeight||10,this.graphdiv=t.graphdiv,this.width=t.width||960,this.observable=t.observable,this.barHeight=this.minBarHeight+50,this.numbers=[],this.color=e.scaleOrdinal(e.schemePaired),this.key=t.key,this.values=t.values,this.humanValues=t.humanValues||t.values,this.onMouseOverCb=t.onMouseOverCb,this.onMouseOutCb=t.onMouseOutCb,this.currentTimestamp=null,this.initialize()}initialize(){this.reset(),e.select(this.graphdiv).empty()?console.warn("no element found: "+this.graphdiv):(this.initArray(),this.initGraph(),this.createLegend(),this.subscription=this.observable.map(t=>({...t,val:this.barHeight*this.values.indexOf(t[this.key])/this.values.length+this.minBarHeight,color:this.color(this.values.indexOf(t[this.key]))})).subscribe(t=>{if(this.currentTimestamp){let e=t.timestamp-this.currentTimestamp;const i=Math.floor(e/this.updateRate)-1;for(let t=0;t<i;t++){this.currentTimestamp,this.updateRate;let e={val:0,color:"grey",timestamp:this.currentTimestamp+this.updateRate*(t+1)};this.numbers.push(e),this.updateGraph(),this.updateAxes(e)}}this.numbers.push(t),this.updateGraph(),this.updateAxes(t),this.currentTimestamp=t.timestamp}))}initArray(){this.numbers=new s(this.numberOfBars)}initGraph(){e.select(this.graphdiv).append("div").attr("id","chart");let t=e.select(this.graphdiv).append("div").append("svg").attr("width",this.width).attr("height",25).attr("id","timescale"),i=20,s=0,r=20,a=0,n=+t.attr("height")-i-r;t.append("g").attr("transform","translate("+a+","+i+")").append("g").attr("class","x axis").attr("transform","translate(0,"+n+")");this.w=+t.attr("width")-a-s}createLegend(){e.select(this.graphdiv).append("div").attr("class","legend");const t=e.select(this.graphdiv+" .legend").selectAll(".legend-item").data(this.humanValues?this.humanValues:this.values).enter().append("div").attr("class","legend-item");t.append("div").attr("class","legend-item-color").style("background",t=>this.color(this.humanValues?this.humanValues.indexOf(t):this.values.indexOf(t))),t.append("div").attr("class","legend-item-caption").text(t=>t)}updateGraph(){let t=this,i=e.select(this.graphdiv+" #chart").selectAll(".bar").data(this.numbers,t=>t.timestamp);i.enter().append("div").attr("class","bar").style("height",t=>t.val).style("margin-top",t=>this.barHeight-t.val).style("background",t=>t.color),i.on("mouseover",(function(i,s){t.onMouseOverCb&&t.onMouseOverCb(i),e.select(this).style("opacity",.2)})).on("mouseout",(function(i,s){t.onMouseOutCb&&t.onMouseOutCb(i),e.select(this).style("opacity",1)})),i.exit().remove()}updateAxes(t){let i,s;this.numbers.length>=this.numberOfBars?(s=new Date(this.numbers[0].timestamp),i=new Date(t.timestamp)):(s=new Date(this.numbers[0].timestamp),i=new Date(s.getTime()),i.setSeconds(s.getSeconds()+this.numberOfBars*this.updateRate/1e3)),this.xScale=e.scaleTime().domain([s,i]).range([0,this.w]),this.xAxis=e.axisBottom(this.xScale).tickFormat(e.timeFormat("%H:%M:%S")),e.select(this.graphdiv+" .x.axis").call(this.xAxis)}reset(){e.selectAll(this.graphdiv+">div").remove(),this.subscription&&this.subscription.dispose(),this.subscription=null}}class s extends Array{constructor(t){super(),this.size=t||100}push(...t){t.length>1||(this.length>this.size-1&&this.shift(),super.push(t[0]))}}void 0!==t.exports?t.exports=i:window.Karandashee=i}()}.call(this,i(2)(t))},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}}]);